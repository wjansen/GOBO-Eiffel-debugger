<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<meta name="generator" content="hevea 2.16">
<link rel="stylesheet" type="text/css" href="debugh.css">
<title>SQL part</title>
</head>
<body >
<a href="debugh012.html"><img src="previous_motif.gif" alt="Previous"></a>
<a href="index.html"><img src="contents_motif.gif" alt="Up"></a>
<a href="debugh014.html"><img src="next_motif.gif" alt="Next"></a>
<hr>
Gedb &#X2013; The Gec debugger<h3 id="sec32" class="subsection">3.10&#XA0;&#XA0;SQL part</h3>
<p><a id="S:sql"></a>
</p><blockquote class="figure"><div class="center"><hr style="width:80%;height:2"></div>
<div class="center"><img src="debugh007.png"></div>
<div class="caption"><table style="border-spacing:6px;border-collapse:separate;" class="cellpading0"><tr><td style="vertical-align:top;text-align:left;" >Figure 7: An <span style="font-family:sans-serif">SQL table</span> part. 
<span style="font-family:sans-serif">_80</span>, &#X2026;, <span style="font-family:sans-serif">_63</span> are object idents 
while <span style="font-family:sans-serif">125</span> &#X2026;<span style="font-family:sans-serif">127</span> in the last column are the values themselves.</td></tr>
</table></div>
<a id="F:sql"></a>
<div class="center"><hr style="width:80%;height:2"></div></blockquote><p>
Another data window can be opened 
from menu <span style="font-family:sans-serif">Window </span>&#X2192;<span style="font-family:sans-serif"> SQL table</span>
Its purpose is to simulate the <span style="font-family:monospace">SELECT</span> command of <span style="font-style:oblique">SQL</span>.
The debugger maintains for each reference type an <span style="font-style:oblique">SQL</span> table 
(conceptually, not really). The table columns are the type&#X2019;s attributes, 
and the table rows are all objects of this type that are reachable 
from the current routine (i.e. from target, arguments, and local variables) 
by deep traversal. 
During the traversal consecutive numbers are assigned 
to each reference object encountered (starting with &#X201C;1&#X201D; for <span style="font-family:monospace">Current</span>). 
These numbers (with a leading underscore) are then shown in the window 
and are at the same time the numbers shown in the main <span style="font-family:sans-serif">Data</span> window 
when the <span style="font-family:sans-serif">ident</span> formatting is chosen. 
A special meaning have the idents &#X201C;<span style="font-family:monospace">0</span>&#X201D; and &#X201C;<span style="font-family:monospace">?</span>&#X201D;: 
&#X201C;<span style="font-family:monospace">0</span>&#X201D; denotes a void reference and &#X201C;<span style="font-family:monospace">?</span>&#X201D; a reference 
to an object that has no ident 
since it has been created during the call of a function. 
Data of basic expanded types are shown in the <span style="font-family:sans-serif">natural</span> format 
and data of other expanded types are (recursively) expanded to their fields. 
The idents remain valid as long as the debuggee is not running 
and the stack level is not changed. The idents are refreshed 
after run and stop of the debuggee and when the stack level has been changed 
(i.e. at the same events when the idents of the <span style="font-family:sans-serif">Data</span> part 
will be refreshed). 
</p><p>Issuing a <span style="font-family:monospace">SELCET</span> command to this table consists of filling 
one to three text fields in the window and then clicking button <span style="font-family:sans-serif">Update</span> 
(a separate update action is necessary to inform the debugger 
that all three input fields have got their values, 
the click on a single input field may be misleading; 
input fields <span style="font-family:sans-serif">select</span> and <span style="font-family:sans-serif">where</span> need to be clicked 
by their own to accept the entered string). 
The entries are: 
</p><dl class="description"><dt class="dt-description"><span style="font-family:sans-serif">select</span></dt><dd class="dd-description"> (optional) queries of the table&#X2019;s type 
as expression list (empty means all attributes);
</dd><dt class="dt-description"><span style="font-family:sans-serif">from</span></dt><dd class="dd-description"> (mandatory) a type name as the table name;
</dd><dt class="dt-description"><span style="font-family:sans-serif">where</span></dt><dd class="dd-description"> (optional) a boolean expression to be satisfied 
by the objects of the table (empty means <span style="font-family:monospace">True</span>)
</dd></dl><p>
(see Sec.&#XA0;<a href="debugh005.html#S%3AspecialFields">3.2</a> for entering a type name or expressions).
The expressions of any nested level may refer to the matching object 
by a leading placeholder &#X201C;<span style="font-family:monospace">?</span>&#X201D;. This is particularly important 
if a name clash of a <span style="font-family:sans-serif">from</span> type&#X2019;s query with a local variable occurs: 
the local variable takes precedence and the query 
should be written like &#X201C;<span style="font-family:monospace">?.</span><span style="font-style:italic">query</span>&#X201D;. 
In any case, the type name should be entered first to ensure 
that expression validation of the two other entries can be successful 
(the arrangement of the entries is for tradition&#X2019;s sake).
Further, the expression list in the <span style="font-family:sans-serif">select</span> field is always extended 
by a leading element (i.e. a leading column in the table shown): 
the ident of the row&#X2019;s object. </p><blockquote class="quote">
<div class="center"><span style="font-weight:bold">Restrictions</span></div>
<ul class="itemize"><li class="li-itemize">
The expressions in the <span style="font-family:sans-serif">select</span> field must not contain ranges
(precisely, they are silently ignored): 
the number of matching indices may vary from row to row 
and no appropriate table width can be obtained in advance. 
</li><li class="li-itemize">The expressions in the <span style="font-family:sans-serif">select</span> and <span style="font-family:sans-serif">where</span> fields must not contain 
object idents: the idents are newly computed and previous settings 
have become invalid. 
</li></ul>
</blockquote><p>The <span style="font-family:sans-serif">SQL table</span> part allows for two policies to filter objects. 
The policy is chosen by clicking the <span style="font-family:sans-serif">precise</span>/<span style="font-family:sans-serif">conform</span> button: 
</p><dl class="description"><dt class="dt-description">
<span style="font-family:sans-serif">precise</span></dt><dd class="dd-description"> 
the object type is equal to the one specified in the <span style="font-family:sans-serif">from</span> field, 
this must be an alive type; 
</dd><dt class="dt-description"><span style="font-family:sans-serif">conform</span></dt><dd class="dd-description"> 
the object type conforms to the one specified in the <span style="font-family:sans-serif">from</span> field, 
this may be a not alive (or even a deferred) type, 
additional attributes of descendant types are not shown 
and additional queries are not available in the <span style="font-family:sans-serif">select</span>, <span style="font-family:sans-serif">where</span> 
expressions. 
</dd></dl><blockquote class="quote">
<div class="center"><span style="font-weight:bold">Known deficiency</span></div>
In case that a descendant type renames attributes or other queries 
then the output does not follow the renaming, 
the output may look very spurious. 
The reason is that the meta information generated by the compiler 
for use of the debugger does not (not yet?) include information 
about renamings. No such problems occur for the <span style="font-family:sans-serif">precise</span> type policy. 
</blockquote><p>The <span style="font-family:sans-serif">SQL table</span> part provides the following actions:
</p><dl class="description"><dt class="dt-description">
<span style="font-weight:bold"><span style="font-family:monospace">left click</span></span></dt><dd class="dd-description">
if the value in the field under the mouse pointer is of a reference type 
then a data window is opened (composed like the one of the <span style="font-family:sans-serif">Data</span> part) 
showing all the qualifiers that lead from a root of the persistence closure 
to the selected object; 
</dd><dt class="dt-description"><span style="font-weight:bold"><span style="font-family:monospace">right click</span></span></dt><dd class="dd-description">
the value in the field under the mouse pointer is inserted 
into the <span style="font-family:sans-serif">Expr</span> field of the <span style="font-family:sans-serif">Evaluation</span> part (similarly to the <span style="font-family:sans-serif">Data</span> part).
</dd></dl><p>A final remark. 
It was not intended to implement all features of <span style="font-style:oblique">SQL</span> command 
<span style="font-family:monospace">SELECT</span> or even a full database, 
so the debugger&#X2019;s <span style="font-family:monospace">SELECT</span> query is rather poor: 
only one table is supported at one time (no <span style="font-family:monospace">JOIN</span>), 
no grouping (no <span style="font-family:monospace">GROUP BY</span>, <span style="font-family:monospace">HAVING</span>), 
and no explicit sorting (no <span style="font-family:monospace">ORDER BY</span>, 
but there is implicit sorting by GUI manipulation). </p>
<hr>
<a href="debugh012.html"><img src="previous_motif.gif" alt="Previous"></a>
<a href="index.html"><img src="contents_motif.gif" alt="Up"></a>
<a href="debugh014.html"><img src="next_motif.gif" alt="Next"></a>
</body>
</html>
